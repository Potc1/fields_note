
<html>
    <body>
        <div id="temp">you</div>
    </body>
</html>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script type="module">
    let tg = window.Telegram.WebApp;
    //console.log(tg.initDataUnsafe.user.id)
    function sendMessageToStreamlitClient(type, data) {
        var outData = Object.assign({
          isStreamlitMessage: true,
          type: type,
        }, data);
        window.parent.postMessage(outData, "*");
      }
    function sendDataToPython(data) {
        sendMessageToStreamlitClient("streamlit:setComponentValue", data);
      }
    function init() {
        sendMessageToStreamlitClient("streamlit:componentReady", { apiVersion: 1 });
      }
    function onDataFromPython(event) {
      if (event.data.type !== "streamlit:render") return;
      console.log(event.data.args)
      localStorage.setItem('blocked', event.data.args.blocked)
      setToLocalStorage(event.data.args.ids, event.data.args.remote)

      // Access data sent from the Streamlit app here, if needed
    }
    function setToLocalStorage(user_id, remote){
      const params = new URLSearchParams(window.location.search);
      console.log('id', localStorage.getItem('ids'))
      if (localStorage.getItem('ids')){
        console.log("ids is setted")
        return
      }
      localStorage.setItem('ids', user_id);
      localStorage.setItem('remote', remote);
    }
    
    window.addEventListener("message", onDataFromPython);
    init();
    sendDataToPython({value: localStorage.getItem('ids'), dataType: "json" });
    //tg.initDataUnsafe.user.id
</script>